# Milestone v1.4: Bug Fixes

**Status:** SHIPPED 2026-01-21
**Phases:** 24-25
**Total Plans:** 5 (3 feature plans + 2 fix plans)

## Overview

Fix gameplay bugs discovered after v1.3 deployment: hard mode validation enforcement, submitted row locking, and timezone-related puzzle date sync issue.

## Phases

### Phase 24: Input Validation Fixes

**Goal**: Enforce hard mode constraints on guess submission + prevent editing submitted rows
**Depends on**: v1.3 complete
**Plans**: 4 (24-01, 24-FIX, 24-FIX-02, UATs)

Plans:

- [x] 24-01: Hard mode validation + row locking
- [x] 24-FIX: Fix hard mode blocking first guess
- [x] 24-FIX-02: Fix backspace state corruption on locked rows

**Details:**

Added `satisfiesConstraints()` function to validate guesses against accumulated constraints from previous rows. Enforced hard mode validation on submission with "Hard mode: must use revealed hints" error message. Implemented row submission tracking via `Set<number>` to prevent backspace from editing submitted rows. Fixed edge cases: first guess validation (no constraints yet) and col 0 backspace handling.

### Phase 25: NYT Sync Fix

**Goal**: Fix timezone-related puzzle date sync issue
**Depends on**: Phase 24
**Plans**: 1

Plans:

- [x] 25-01: Timezone fix + data update

**Details:**

Fixed timezone-sensitive date handling that caused wrong puzzle to display for users in timezones behind UTC. The issue was that `toISOString().split('T')[0]` converts to UTC before extracting the date, which can return the previous/next day's date. Solution: use `getFullYear()/getMonth()/getDate()` for local date formatting. Added `formatLocalDate()` helper function. Updated embedded puzzle data through 2026-01-21.

---

## Milestone Summary

**Key Decisions:**

- Validate hard mode on submission (not during typing) for better UX
- Use explicit row-based loop for constraint building (rows 0 to currentRow-1)
- Use local time instead of UTC for date formatting to match user's local day

**Issues Resolved:**

- Hard mode did not enforce using revealed hints
- Backspace could edit rows that had already been submitted
- First guess was incorrectly blocked in hard mode
- Backspace at col 0 with locked previous row caused state corruption
- Wrong puzzle displayed due to UTC vs local time date conversion

**Issues Deferred:**

None.

**Technical Debt Incurred:**

None - clean implementations following existing patterns.

---

_For current project status, see .planning/ROADMAP.md_
