---
phase: 07-hard-mode
plan: 07-01-FIX
type: fix
---

<objective>
Fix 1 UAT issue from plan 07-01.

Source: 07-01-ISSUES.md
Priority: 0 critical, 1 major, 0 minor
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/07-hard-mode/07-01-ISSUES.md

**Original plan for reference:**
@.planning/phases/07-hard-mode/07-01-PLAN.md

**Key files:**
@src/main.ts
@src/logic/hardMode.ts
@src/logic/filter.ts
</context>

<analysis>
## Root Cause Analysis

After examining the code, the issue is **by design, not a bug**:

1. **`filterWords()`** in filter.ts (lines 55-66) already enforces:
   - Green letters must be in exact positions
   - Yellow letters must appear in the word (but not at excluded positions)

2. **`isHardModeValid()`** in hardMode.ts checks:
   - Green letters must be in exact positions
   - Yellow letters must appear somewhere in the word

**These checks are essentially identical.** The `filterWords` function already implements hard mode constraints because it's finding words that could be the answer - which inherently requires using all revealed hints.

## The Real Difference

In actual Wordle:
- **Normal mode**: Player can guess ANY valid 5-letter word
- **Hard mode**: Player MUST use revealed hints in guesses

In our Wordle Helper:
- We **always** filter to show words that could be the answer
- Words that could be the answer **inherently** satisfy hard mode rules
- Therefore, hard mode toggle currently has no effect

## What Hard Mode SHOULD Do

The hard mode toggle should distinguish between:
1. **OFF**: Show all words that could be the ANSWER (current behavior)
2. **ON**: Show all words that are valid GUESSES in hard mode (same as #1!)

Actually, for a Wordle **helper**, these are identical because:
- If a word could be the answer, it's a valid hard mode guess
- If a word is NOT a valid hard mode guess, it can't be the answer anyway

## Resolution Options

**Option A: Remove Hard Mode Feature (Recommended)**
- Hard mode is redundant for a Wordle helper
- Remove the toggle UI and isHardModeValid function
- Document in UI that suggestions always follow Wordle rules

**Option B: Keep Toggle as Visual Indicator**
- Keep the toggle but document that it has no functional effect
- The helper inherently operates in "hard mode" because it shows possible answers

**Option C: Change Filter Behavior (Not Recommended)**
- Make normal mode show ALL valid 5-letter words (ignoring hints)
- This defeats the purpose of the helper
</analysis>

<tasks>
<task type="checkpoint:decision" gate="blocking">
  <decision>How to resolve the hard mode feature discrepancy</decision>
  <context>The hard mode toggle doesn't change suggestion count because filterWords already applies the same constraints. For a Wordle helper, showing possible answers = showing valid hard mode guesses.</context>
  <options>
    <option id="remove">
      <name>Remove Hard Mode Feature</name>
      <pros>Clean code, no confusing toggle, accurate UX</pros>
      <cons>Work done in 07-01 gets reverted</cons>
    </option>
    <option id="keep-indicator">
      <name>Keep as Visual Indicator with Tooltip</name>
      <pros>Keeps familiar UI element, explains behavior</pros>
      <cons>Toggle that does nothing may confuse users</cons>
    </option>
    <option id="different-behavior">
      <name>Make Normal Mode Show All Words</name>
      <pros>Toggle has clear functional difference</pros>
      <cons>Defeats helper purpose, less useful</cons>
    </option>
  </options>
  <resume-signal>Select: remove, keep-indicator, or different-behavior</resume-signal>
</task>

<task type="auto" depends-on="decision">
  <name>Implement chosen resolution</name>
  <files>TBD based on decision</files>
  <action>
Based on user choice:

**If remove:**
- Delete src/logic/hardMode.ts
- Remove hard mode toggle HTML from main.ts
- Remove hardModeEnabled state and checkbox handlers
- Remove hard mode filter call in updateSuggestions()
- Remove hard mode CSS styles

**If keep-indicator:**
- Add tooltip/help text explaining behavior
- Update toggle label to indicate it's informational

**If different-behavior:**
- Modify filterWords to have two modes
- Pass hardModeEnabled to filterWords
- When OFF, skip requiredLetters constraint
  </action>
  <verify>npm run build succeeds, app behaves as expected per chosen option</verify>
  <done>Hard mode feature matches user's chosen resolution</done>
</task>
</tasks>

<verification>
Before declaring plan complete:
- [ ] User decision captured
- [ ] Chosen resolution implemented
- [ ] Build passes
- [ ] Behavior matches expectations
</verification>

<success_criteria>
- User makes informed decision on hard mode feature
- Implementation matches chosen approach
- No confusing UX remaining
- Ready for re-verification
</success_criteria>

<output>
After completion, create `.planning/phases/07-hard-mode/07-01-FIX-SUMMARY.md`
</output>
