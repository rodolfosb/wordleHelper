---
phase: 22-pwa-updates
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [vite.config.ts]
autonomous: false
---

<objective>
Add PWA `id` field for stable app identity and verify PWA functionality on new domain.

Purpose: The PWA manifest scope and start_url are already correctly set to `/` from Phase 21's base path changes. This phase adds the recommended `id` field for stable PWA identity across domain changes, and verifies the PWA installs and updates correctly on the new domain.

Output: Updated PWA manifest with `id` field, verified PWA installation on wordle.brdk.cc
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-domain-configuration/21-01-SUMMARY.md

@vite.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add PWA id field for stable identity</name>
  <files>vite.config.ts</files>
  <action>
Add `id` field to the PWA manifest in vite.config.ts. The `id` field provides a stable identity for the PWA that persists across domain changes.

Set `id: '/'` in the manifest section, placed right after `start_url`. This ensures browsers recognize this as the same app even if the domain changes again.

The id field is a web standard that helps browsers identify the app uniquely:
- Allows the PWA to be recognized as the same app across domains
- Prevents duplicate installations when domain changes
- Recommended by Chrome's PWA criteria
  </action>
  <verify>npm run build && cat dist/manifest.webmanifest | grep -o '"id":"/"'</verify>
  <done>manifest.webmanifest contains "id":"/" field</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
PWA with stable `id` field deployed to wordle.brdk.cc. Need to verify:
1. PWA installs correctly from the new domain
2. Service worker registers and caches assets
3. App works offline after installation
  </what-built>
  <how-to-verify>
1. Visit https://wordle.brdk.cc in Chrome (desktop or mobile)
2. Check DevTools > Application > Manifest:
   - Verify "id" shows "/"
   - Verify "scope" shows "/"
   - Verify "start_url" shows "/"
3. Check DevTools > Application > Service Workers:
   - Verify service worker is registered and "activated and is running"
4. Install the PWA:
   - Desktop: Click install icon in address bar (or Chrome menu > Install)
   - Mobile: "Add to Home Screen" from browser menu
5. Launch the installed app
6. Test offline mode:
   - Enable airplane mode / disable network
   - Verify app loads and shows cached content
  </how-to-verify>
  <resume-signal>Type "approved" if PWA installs and works offline, or describe issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] dist/manifest.webmanifest contains `id`, `scope`, and `start_url` all set to "/"
- [ ] Human verified PWA installation and offline functionality
</verification>

<success_criteria>

- PWA manifest has `id` field for stable identity
- PWA installs correctly on new domain
- Service worker registers and caches assets
- App works offline after installation
</success_criteria>

<output>
After completion, create `.planning/phases/22-pwa-updates/22-01-SUMMARY.md`
</output>
