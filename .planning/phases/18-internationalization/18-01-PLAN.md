---
phase: 18-internationalization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/data/words/, src/main.ts, src/logic/filter.ts]
autonomous: true
---

<objective>
Restructure word lists into folder-per-language architecture for extensibility.

Purpose: Create scalable structure for multi-language support.
Output: English word lists moved to `src/data/words/en/`, unified index with helper functions.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-internationalization/DISCOVERY.md

@src/data/words.ts
@src/data/words4.ts
@src/main.ts
@src/logic/filter.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create English word list folder structure</name>
  <files>src/data/words/en/</files>
  <action>
1. Create directory structure:
   ```
   src/data/words/
     en/
       index.ts
       words4.ts
       words5.ts
       words6.ts
       words7.ts
       words8.ts
       words9.ts
       words10.ts
   ```

2. Move word lists from existing files:
   - `src/data/words.ts` → extract WORD_LIST to `src/data/words/en/words5.ts`
   - `src/data/words4.ts` → copy content to `src/data/words/en/words4.ts`
   - `src/data/words6.ts` → copy content to `src/data/words/en/words6.ts`
   - (repeat for 7, 8, 9, 10)

3. Each word file should have structure:
   ```typescript
   /**
    * English N-letter word list
    */
   export const WORD_LIST_EN_N: string[] = [
     // words...
   ];

   export const WORD_SET_EN_N: Set<string> = new Set(WORD_LIST_EN_N);
   ```

4. Create `src/data/words/en/index.ts`:
   ```typescript
   // English word lists
   export { WORD_LIST_EN_4, WORD_SET_EN_4 } from './words4';
   export { WORD_LIST_EN_5, WORD_SET_EN_5 } from './words5';
   export { WORD_LIST_EN_6, WORD_SET_EN_6 } from './words6';
   export { WORD_LIST_EN_7, WORD_SET_EN_7 } from './words7';
   export { WORD_LIST_EN_8, WORD_SET_EN_8 } from './words8';
   export { WORD_LIST_EN_9, WORD_SET_EN_9 } from './words9';
   export { WORD_LIST_EN_10, WORD_SET_EN_10 } from './words10';

   import { WORD_LIST_EN_4, WORD_SET_EN_4 } from './words4';
   import { WORD_LIST_EN_5, WORD_SET_EN_5 } from './words5';
   import { WORD_LIST_EN_6, WORD_SET_EN_6 } from './words6';
   import { WORD_LIST_EN_7, WORD_SET_EN_7 } from './words7';
   import { WORD_LIST_EN_8, WORD_SET_EN_8 } from './words8';
   import { WORD_LIST_EN_9, WORD_SET_EN_9 } from './words9';
   import { WORD_LIST_EN_10, WORD_SET_EN_10 } from './words10';

   /**
    * Get English word list for a given length
    */
   export function getEnglishWordList(length: number): string[] {
     switch (length) {
       case 4: return WORD_LIST_EN_4;
       case 5: return WORD_LIST_EN_5;
       case 6: return WORD_LIST_EN_6;
       case 7: return WORD_LIST_EN_7;
       case 8: return WORD_LIST_EN_8;
       case 9: return WORD_LIST_EN_9;
       case 10: return WORD_LIST_EN_10;
       default: return WORD_LIST_EN_5;
     }
   }

   /**
    * Get English word set for a given length (O(1) lookup)
    */
   export function getEnglishWordSet(length: number): Set<string> {
     switch (length) {
       case 4: return WORD_SET_EN_4;
       case 5: return WORD_SET_EN_5;
       case 6: return WORD_SET_EN_6;
       case 7: return WORD_SET_EN_7;
       case 8: return WORD_SET_EN_8;
       case 9: return WORD_SET_EN_9;
       case 10: return WORD_SET_EN_10;
       default: return WORD_SET_EN_5;
     }
   }
   ```
  </action>
  <verify>All English word files created with correct exports</verify>
  <done>English word lists organized in src/data/words/en/</done>
</task>

<task type="auto">
  <name>Task 2: Create main words index with language support</name>
  <files>src/data/words/index.ts</files>
  <action>
1. Create `src/data/words/index.ts`:
   ```typescript
   /**
    * Word list module - provides word lists for multiple languages
    *
    * Supported languages:
    * - en: English (4-10 letter words)
    * - pt: Portuguese (coming in 18-02)
    */

   // Re-export English word lists and helpers
   export * from './en';

   // Type for supported languages
   export type WordLanguage = 'en' | 'pt';

   // Import English helpers
   import { getEnglishWordList, getEnglishWordSet } from './en';

   // Cache for filtered word lists (ensures ASCII-only filtering once per length)
   const filteredWordListCache: Map<string, string[]> = new Map();
   const filteredWordSetCache: Map<string, Set<string>> = new Map();

   /**
    * Get the word list for a given language and word length
    * @param language - 'en' or 'pt'
    * @param length - Word length (4-10)
    * @returns Array of words
    */
   export function getWordListForLanguageAndLength(
     language: WordLanguage,
     length: number
   ): string[] {
     const cacheKey = `${language}-${length}`;

     if (filteredWordListCache.has(cacheKey)) {
       return filteredWordListCache.get(cacheKey)!;
     }

     let rawList: string[];

     if (language === 'pt') {
       // Portuguese - will be added in 18-02, fall back to English for now
       rawList = getEnglishWordList(length);
     } else {
       rawList = getEnglishWordList(length);
     }

     // Filter to ensure correct length and valid characters
     // For English: ASCII lowercase only
     // For Portuguese: will include accented chars
     const validChars = language === 'pt' ? /^[a-záàâãéêíóôõúç]+$/ : /^[a-z]+$/;
     const filtered = rawList.filter(word =>
       word.length === length && validChars.test(word)
     );

     filteredWordListCache.set(cacheKey, filtered);
     return filtered;
   }

   /**
    * Get the word set for a given language and word length (O(1) lookup)
    * @param language - 'en' or 'pt'
    * @param length - Word length (4-10)
    * @returns Set of words
    */
   export function getWordSetForLanguageAndLength(
     language: WordLanguage,
     length: number
   ): Set<string> {
     const cacheKey = `${language}-${length}`;

     if (filteredWordSetCache.has(cacheKey)) {
       return filteredWordSetCache.get(cacheKey)!;
     }

     const wordList = getWordListForLanguageAndLength(language, length);
     const wordSet = new Set(wordList);

     filteredWordSetCache.set(cacheKey, wordSet);
     return wordSet;
   }

   // Backward compatibility aliases
   export { WORD_LIST_EN_5 as WORD_LIST } from './en';
   export { WORD_SET_EN_5 as WORD_SET } from './en';

   /**
    * Get the word list for a given length (English only - backward compat)
    * @deprecated Use getWordListForLanguageAndLength instead
    */
   export function getWordListForLength(length: number): string[] {
     return getWordListForLanguageAndLength('en', length);
   }

   /**
    * Get the word set for a given length (English only - backward compat)
    * @deprecated Use getWordSetForLanguageAndLength instead
    */
   export function getWordSetForLength(length: number): Set<string> {
     return getWordSetForLanguageAndLength('en', length);
   }
   ```
  </action>
  <verify>tsc --noEmit passes</verify>
  <done>Main index created with language-aware helpers and backward compatibility</done>
</task>

<task type="auto">
  <name>Task 3: Update imports across codebase</name>
  <files>src/main.ts, src/logic/filter.ts</files>
  <action>
1. Update `src/main.ts`:
   - Change import from `'./data/words'` to `'./data/words/index'`
   - Or keep as `'./data/words'` if TypeScript resolves index.ts automatically

2. Update `src/logic/filter.ts`:
   - Update any word list imports to use new path

3. Search for any other files importing from `./data/words*` and update them

4. Verify all imports work correctly
  </action>
  <verify>npm run build succeeds</verify>
  <done>All imports updated to use new word list structure</done>
</task>

<task type="auto">
  <name>Task 4: Remove old word list files</name>
  <files>src/data/words*.ts</files>
  <action>
1. After verifying build passes, remove old files:
   - src/data/words.ts
   - src/data/words4.ts
   - src/data/words6.ts
   - src/data/words7.ts
   - src/data/words8.ts
   - src/data/words9.ts
   - src/data/words10.ts

2. Run build again to ensure nothing breaks
  </action>
  <verify>npm run build succeeds with no old files</verify>
  <done>Old word list files removed, new structure is sole source</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `src/data/words/en/` contains all English word lists
- [ ] `src/data/words/index.ts` exports all helpers
- [ ] Backward compatibility: `WORD_LIST`, `getWordListForLength` still work
- [ ] New functions: `getWordListForLanguageAndLength`, `getWordSetForLanguageAndLength` work
- [ ] Old `src/data/words*.ts` files removed
- [ ] No import errors anywhere in codebase
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Codebase builds successfully
- Ready for Portuguese word lists in 18-02
</success_criteria>

<output>
After completion, create `.planning/phases/18-internationalization/18-01-SUMMARY.md`
</output>
