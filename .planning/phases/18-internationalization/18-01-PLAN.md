---
phase: 18-internationalization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/data/wordsPt5.ts, src/data/words.ts, src/types/index.ts, src/utils/settings.ts]
autonomous: true
---

<objective>
Create Portuguese 5-letter word list and add language infrastructure to settings.

Purpose: Foundation for multilingual word support in Open Mode.
Output: Portuguese word list file, language setting in AppSettings, helper functions.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-internationalization/DISCOVERY.md

@src/data/words.ts
@src/types/index.ts
@src/utils/settings.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Portuguese 5-letter word list</name>
  <files>src/data/wordsPt5.ts</files>
  <action>
1. Fetch the Portuguese word list from:
   https://raw.githubusercontent.com/Gpossas/Termo/main/br-utf8.txt-5-letras.txt

2. Create src/data/wordsPt5.ts with structure matching other word files:
   ```typescript
   /**
    * Portuguese 5-letter word list for Open Mode
    * Source: Termo (Brazilian Portuguese Wordle) - https://github.com/Gpossas/Termo
    * Words may contain accented characters (á, é, í, ó, ú, ã, õ, â, ê, ô, ç)
    */
   export const WORD_LIST_PT_5: string[] = [
     // ~6,000 words, lowercase, alphabetically sorted
   ];

   export const WORD_SET_PT_5: Set<string> = new Set(WORD_LIST_PT_5);
   ```

3. Process the word list:
   - Convert to lowercase
   - Remove any blank lines or whitespace
   - Sort alphabetically
   - Keep accented characters as-is (UTF-8)
   - Filter to ensure exactly 5 characters

4. Verify word count is approximately 6,000 words
  </action>
  <verify>tsc --noEmit passes, file exports WORD_LIST_PT_5 and WORD_SET_PT_5</verify>
  <done>Portuguese word list with ~6,000 words exported</done>
</task>

<task type="auto">
  <name>Task 2: Add wordLanguage to AppSettings</name>
  <files>src/types/index.ts, src/utils/settings.ts</files>
  <action>
1. In src/types/index.ts, add to AppSettings interface:
   ```typescript
   wordLanguage: 'en' | 'pt';
   ```

2. In src/utils/settings.ts:
   - Add `wordLanguage: 'en'` to DEFAULT_SETTINGS
   - The setting will persist with other app settings automatically
  </action>
  <verify>tsc --noEmit passes</verify>
  <done>wordLanguage setting added to AppSettings with default 'en'</done>
</task>

<task type="auto">
  <name>Task 3: Add language-aware word list helpers</name>
  <files>src/data/words.ts</files>
  <action>
1. Import the Portuguese word list:
   ```typescript
   import { WORD_LIST_PT_5, WORD_SET_PT_5 } from './wordsPt5';
   ```

2. Re-export for direct access if needed:
   ```typescript
   export { WORD_LIST_PT_5, WORD_SET_PT_5 };
   ```

3. Add type for supported word languages:
   ```typescript
   export type WordLanguage = 'en' | 'pt';
   ```

4. Add helper function to get word list by language and length:
   ```typescript
   /**
    * Get the word list for a given language and word length
    * Portuguese only supports 5-letter words; other lengths fall back to English
    * @param language - 'en' or 'pt'
    * @param length - Word length (4-10)
    * @returns Array of words
    */
   export function getWordListForLanguageAndLength(
     language: WordLanguage,
     length: number
   ): string[] {
     // Portuguese only has 5-letter words
     if (language === 'pt') {
       if (length === 5) {
         return WORD_LIST_PT_5;
       }
       // Fall back to English for other lengths
       return getWordListForLength(length);
     }

     // English - use existing function
     return getWordListForLength(length);
   }
   ```

5. Add helper function to get word set by language and length:
   ```typescript
   /**
    * Get the word set for a given language and word length (O(1) lookup)
    * Portuguese only supports 5-letter words; other lengths fall back to English
    * @param language - 'en' or 'pt'
    * @param length - Word length (4-10)
    * @returns Set of words
    */
   export function getWordSetForLanguageAndLength(
     language: WordLanguage,
     length: number
   ): Set<string> {
     // Portuguese only has 5-letter words
     if (language === 'pt') {
       if (length === 5) {
         return WORD_SET_PT_5;
       }
       // Fall back to English for other lengths
       return getWordSetForLength(length);
     }

     // English - use existing function
     return getWordSetForLength(length);
   }
   ```
  </action>
  <verify>tsc --noEmit passes, new functions are exported</verify>
  <done>Language-aware word list helpers added to words.ts</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] src/data/wordsPt5.ts contains ~6,000 Portuguese words
- [ ] WORD_LIST_PT_5 and WORD_SET_PT_5 are exported
- [ ] wordLanguage added to AppSettings interface
- [ ] DEFAULT_SETTINGS includes wordLanguage: 'en'
- [ ] getWordListForLanguageAndLength() works correctly
- [ ] getWordSetForLanguageAndLength() works correctly
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Portuguese word list ready for use
- No errors or warnings introduced
</success_criteria>

<output>
After completion, create `.planning/phases/18-internationalization/18-01-SUMMARY.md`
</output>
