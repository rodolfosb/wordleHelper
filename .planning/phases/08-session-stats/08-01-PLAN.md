---
phase: 08-session-stats
plan: 01
type: execute
depends_on: []
files_modified: [src/types/index.ts, src/logic/stats.ts, src/ui/StatsModal.ts, src/main.ts, src/style.css]
---

<objective>
Implement session statistics tracking with LocalStorage persistence.

Purpose: Give users insight into their Wordle helper usage patterns with games played, win rate, and guess distribution.
Output: Stats modal showing statistics, triggered from header button, persisted across sessions.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior phase context:**
@.planning/phases/07-hard-mode/07-01-SUMMARY.md

**Key source files:**
@src/main.ts
@src/types/index.ts
@src/ui/Suggestions.ts (modal pattern reference)
@src/style.css

**Tech available:** Vite, TypeScript, vanilla DOM
**Established patterns:**
- Class-based UI components (GuessGrid, Suggestions)
- Event delegation for click handling
- Wordle dark theme (#121213 bg, #538d4e green, #b59f3b yellow)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create stats types and persistence logic</name>
  <files>src/types/index.ts, src/logic/stats.ts</files>
  <action>
    1. Add SessionStats type to types/index.ts:
       - gamesPlayed: number
       - gamesWon: number
       - currentStreak: number
       - maxStreak: number
       - guessDistribution: number[] (6 elements for guesses 1-6)

    2. Create src/logic/stats.ts with:
       - STORAGE_KEY constant ('wordle-helper-stats')
       - loadStats(): SessionStats - loads from LocalStorage, returns default if missing
       - saveStats(stats: SessionStats): void - saves to LocalStorage
       - recordGame(stats: SessionStats, won: boolean, guesses: number): SessionStats - returns new stats with game recorded (immutable update)
       - getWinRate(stats: SessionStats): number - returns percentage 0-100

    Default stats: all zeros, empty distribution array [0,0,0,0,0,0]
  </action>
  <verify>TypeScript compiles without errors. Create test in console: `import { loadStats } from './logic/stats'; loadStats()` returns default stats object.</verify>
  <done>Stats types defined, persistence functions work, loadStats returns default when no data exists</done>
</task>

<task type="auto">
  <name>Task 2: Create stats modal UI component</name>
  <files>src/ui/StatsModal.ts, src/style.css</files>
  <action>
    1. Create src/ui/StatsModal.ts class:
       - Constructor takes container element
       - render(stats: SessionStats): void - updates modal content
       - show(): void - displays modal
       - hide(): void - hides modal
       - onClose callback for modal dismiss

    2. Modal structure:
       - Overlay background (semi-transparent)
       - Modal container with header "Statistics" and X close button
       - Stats grid: Games Played, Win %, Current Streak, Max Streak
       - Guess distribution bar chart (horizontal bars for 1-6 guesses)

    3. Add CSS in style.css:
       - Modal overlay: position fixed, full screen, dark semi-transparent bg
       - Modal container: centered, #1a1a1b background, rounded corners
       - Stats grid: 2x2 grid layout with large numbers and small labels
       - Distribution bars: horizontal bars with Wordle green, percentage widths
       - Wordle theme colors throughout
       - Smooth fade-in animation for modal

    Avoid: Don't use framework - vanilla DOM only. Don't add close-on-click-outside (users expect X button).
  </action>
  <verify>npm run build passes. Modal CSS properly scoped.</verify>
  <done>StatsModal class created, renders stats with correct structure, CSS matches Wordle theme</done>
</task>

<task type="auto">
  <name>Task 3: Integrate stats tracking into game flow</name>
  <files>src/main.ts</files>
  <action>
    1. Import stats functions and StatsModal

    2. Add stats button to header (next to title):
       - Chart/bar icon button
       - Opens stats modal on click

    3. Load stats on app init:
       - Call loadStats() to get current stats
       - Store in app state variable

    4. Create StatsModal instance:
       - Append to app container
       - Wire up close callback

    5. Track game completion:
       - On win (all green): recordGame(stats, true, row + 1)
       - On game over (row 5, no win): recordGame(stats, false, 6)
       - Save updated stats with saveStats()

    6. Stats button click handler:
       - Render current stats to modal
       - Show modal

    Note: Stats persist across sessions. Reset Game does NOT reset stats (stats are cumulative).
  </action>
  <verify>
    1. npm run dev
    2. Click stats button - modal shows with 0/0 stats
    3. Win a game - stats update to 1 game, 100% win rate
    4. Refresh page - stats persist
    5. Reset game - stats unchanged
  </verify>
  <done>Stats button in header, modal opens with stats, game results recorded, stats persist across page refreshes</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] npm run build succeeds without errors
- [ ] Stats modal opens from header button
- [ ] Win/loss games update statistics correctly
- [ ] Guess distribution shows correct bars
- [ ] Stats persist after page refresh
- [ ] Reset Game does not clear stats
- [ ] Modal closes with X button
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Stats UI matches Wordle theme
- LocalStorage persistence works correctly
</success_criteria>

<output>
After completion, create `.planning/phases/08-session-stats/08-01-SUMMARY.md`:

# Phase 8 Plan 01: Session Stats Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase complete, ready for Phase 9 (Wordle History)
</output>
