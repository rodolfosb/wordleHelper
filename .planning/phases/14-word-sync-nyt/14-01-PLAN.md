---
phase: 14-word-sync-nyt
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/data/wordleAnswers.json, src/data/wordleAnswers.ts, src/data/history.ts, src/main.ts, src/types/index.ts]
autonomous: true
---

<objective>
Overhaul the daily word loading system to support updatable word data and improve handling of missing puzzles.

Purpose: Current embedded TypeScript array is static and cannot be updated without rebuilding. Convert to JSON asset that can be updated independently, add clear visual indication when puzzle data is outdated.

Output: JSON-based word list, improved fallback handling with user notification, cleaner word data architecture.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-settings-menu/13-01-SUMMARY.md

# Current word loading system
@src/data/wordleAnswers.ts
@src/data/history.ts
@src/main.ts
@src/types/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert word answers to JSON format</name>
  <files>src/data/wordleAnswers.json, src/data/wordleAnswers.ts</files>
  <action>
    1. Create `src/data/wordleAnswers.json` containing the array of word entries:
       ```json
       [
         { "game": 0, "date": "2021-06-19", "answer": "cigar" },
         ...
       ]
       ```
    2. Update `src/data/wordleAnswers.ts` to:
       - Import the JSON file: `import wordleData from './wordleAnswers.json'`
       - Export as typed array: `export const WORDLE_ANSWERS: WordleAnswer[] = wordleData`
       - Keep the WordleAnswer interface and helper functions (getFirstDate, getLastDate, findByDate, findByGame)

    This separates data from code - the JSON can be updated without modifying TypeScript.
    Vite handles JSON imports natively.
  </action>
  <verify>npm run build succeeds, app starts and shows puzzle</verify>
  <done>Word answers stored as JSON, imported by TypeScript module</done>
</task>

<task type="auto">
  <name>Task 2: Add data freshness tracking and notification</name>
  <files>src/data/wordleAnswers.ts, src/types/index.ts, src/main.ts</files>
  <action>
    1. Add to `src/data/wordleAnswers.ts`:
       - `getDataAge(): number` - returns days since last entry in data
       - `isDataStale(): boolean` - returns true if data is >1 day old
       - `getMissingPuzzleCount(): number` - returns count of missing daily puzzles since last entry

    2. Update `src/types/index.ts`:
       - Add `dataStale?: boolean` to TodaysPuzzleResult to indicate data freshness

    3. Update `src/main.ts`:
       - When `getTodaysPuzzle().isFallback` is true, show a banner/message indicating the puzzle data needs updating
       - Display message like "Playing Wordle #XXXX from [date] - puzzle data out of date"
       - Style it distinctively (warning color) so user knows they're not playing today's actual NYT puzzle
  </action>
  <verify>Set system date forward or modify test to verify stale data detection works</verify>
  <done>App shows clear indication when playing with outdated puzzle data</done>
</task>

<task type="auto">
  <name>Task 3: Add NYT mode toggle to settings</name>
  <files>src/types/index.ts, src/utils/settings.ts, src/ui/SettingsModal.ts, src/main.ts</files>
  <action>
    1. Add `nytMode: boolean` to AppSettings interface in `src/types/index.ts`
       - When true: Play official NYT daily puzzle (with fallback handling)
       - When false: Open mode (random word, no specific puzzle number)

    2. Update DEFAULT_SETTINGS in `src/utils/settings.ts`:
       - Add `nytMode: true` (default to NYT mode)

    3. Add NYT Mode toggle to SettingsModal:
       - Label: "NYT Mode"
       - Description beneath toggle: "Follow official NYT daily puzzle"
       - Same toggle switch styling as other settings

    4. Update `src/main.ts`:
       - Read nytMode from settings
       - When nytMode is false, don't load daily puzzle - show "Open Mode" in puzzle info
       - When nytMode is true, load today's puzzle (or fallback with warning)
       - Reset game should respect current mode
  </action>
  <verify>Toggle NYT mode in settings, verify puzzle info updates accordingly</verify>
  <done>Users can toggle between NYT mode and Open mode via settings</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] App loads and displays today's puzzle (or fallback with warning)
- [ ] JSON import works correctly (word data loads)
- [ ] Stale data shows clear warning message
- [ ] NYT mode toggle works in settings
- [ ] Open mode shows "Open Mode" in puzzle info
- [ ] NYT mode shows "Wordle #XXXX (date)" in puzzle info
</verification>

<success_criteria>

- All tasks completed
- Word answers stored as separate JSON file
- Clear visual indication when puzzle data is outdated
- NYT mode toggle available in settings
- Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/14-word-sync-nyt/14-01-SUMMARY.md`
</output>
