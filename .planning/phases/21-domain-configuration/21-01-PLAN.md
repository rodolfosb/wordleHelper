---
phase: 21-domain-configuration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: false
---

<objective>
Configure custom subdomain for Wordle Helper by adding domain in Vercel and setting up Cloudflare DNS records with proper SSL configuration.

Purpose: Enable access to Wordle Helper via a custom subdomain (e.g., wordle.yourdomain.com) instead of the Vercel-generated URL.
Output: Working custom subdomain pointing to Vercel deployment with valid SSL certificate.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-domain-configuration/21-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <action>Add custom domain in Vercel dashboard</action>
  <instructions>
    Prerequisites:
    - Vercel project must be deployed (from Phase 19)
    - Build configuration updated for root path (from Phase 20)

    Steps:
    1. Go to: https://vercel.com/dashboard
    2. Select your Wordle Helper project
    3. Navigate to: Settings → Domains
    4. Click "Add Domain"
    5. Enter your subdomain: wordle.yourdomain.com (replace with your actual subdomain)
    6. Vercel will display the required DNS records - **COPY THESE VALUES**:
       - CNAME target (usually like `cname.vercel-dns.com` or a project-specific target)
       - Note any additional instructions

    Important: Copy the exact CNAME target shown - newer projects get unique targets like `d1d4fc829fe7bc7c.vercel-dns-017.com`
  </instructions>
  <verification>Domain appears in Vercel domains list (likely showing "Invalid Configuration" until DNS is set up)</verification>
  <resume-signal>Paste the CNAME target Vercel gave you, then type "done"</resume-signal>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <action>Configure Cloudflare DNS record</action>
  <instructions>
    1. Go to: https://dash.cloudflare.com
    2. Select your domain
    3. Navigate to: DNS → Records
    4. Click "Add record"
    5. Configure as follows:
       - Type: CNAME
       - Name: wordle (or your chosen subdomain prefix)
       - Target: [paste the CNAME target from previous step]
       - Proxy status: **DNS only** (click the orange cloud to turn it GRAY - this is critical!)
       - TTL: Auto
    6. Click "Save"

    Critical: The proxy MUST be OFF (gray cloud). Orange cloud = proxy ON = SSL will fail.
  </instructions>
  <verification>DNS record appears in Cloudflare DNS records list with gray cloud icon</verification>
  <resume-signal>Type "done" when DNS record is created with proxy OFF</resume-signal>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <action>Configure Cloudflare SSL/TLS mode</action>
  <instructions>
    1. In Cloudflare dashboard, stay on the same domain
    2. Navigate to: SSL/TLS → Overview
    3. Set encryption mode to: **Full**
       - NOT "Off"
       - NOT "Flexible" (causes redirect loops)
       - NOT "Full (strict)" (may cause issues if Vercel cert not trusted)
       - Just "Full"
    4. Save if prompted

    Why "Full": This encrypts traffic between Cloudflare and Vercel, preventing redirect loops.
  </instructions>
  <verification>SSL/TLS overview page shows "Full" encryption mode selected</verification>
  <resume-signal>Type "done" when SSL mode is set to Full</resume-signal>
</task>

<task type="auto">
  <name>Task 4: Verify DNS propagation</name>
  <files></files>
  <action>
    Run DNS verification commands to confirm the CNAME record is propagating:
    1. Check CNAME record: `dig CNAME wordle.yourdomain.com +short`
    2. Check if domain resolves: `dig wordle.yourdomain.com +short`
    3. Test HTTP response: `curl -I https://wordle.yourdomain.com`

    Note: DNS propagation can take 5-30 minutes. If records don't show yet, wait a few minutes and retry.
  </action>
  <verify>dig command returns the CNAME target, curl returns HTTP 200</verify>
  <done>DNS records propagated and domain resolves to Vercel</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Custom subdomain configured with Vercel + Cloudflare DNS + SSL</what-built>
  <how-to-verify>
    1. Visit: https://wordle.yourdomain.com (your actual subdomain)
    2. Verify: Page loads without SSL errors
    3. Verify: No redirect loop (ERR_TOO_MANY_REDIRECTS)
    4. Verify: App functions correctly (can play game, settings work)
    5. Check: Green padlock in browser address bar (valid SSL)
    6. Check: Vercel dashboard shows "Valid Configuration" for domain

    Troubleshooting:
    - ERR_TOO_MANY_REDIRECTS: Cloudflare SSL mode is wrong - set to "Full"
    - SSL certificate error: Wait 5-15 minutes for Vercel to generate cert
    - Vercel shows "Invalid Configuration": DNS hasn't propagated - wait and refresh
  </how-to-verify>
  <resume-signal>Type "approved" if site works, or describe the issue</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Custom subdomain added in Vercel
- [ ] CNAME record created in Cloudflare with proxy OFF
- [ ] SSL/TLS mode set to "Full" in Cloudflare
- [ ] DNS propagation confirmed via dig command
- [ ] Site accessible via custom subdomain with valid SSL
- [ ] Vercel dashboard shows "Valid Configuration"
</verification>

<success_criteria>

- Custom subdomain resolves to Vercel deployment
- SSL certificate valid (no browser warnings)
- No redirect loops
- App fully functional on custom domain
</success_criteria>

<output>
After completion, create `.planning/phases/21-domain-configuration/21-01-SUMMARY.md`
</output>
