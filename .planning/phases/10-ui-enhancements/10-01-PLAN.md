---
phase: 10-ui-enhancements
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/ui/Keyboard.ts, src/ui/Suggestions.ts, src/style.css, src/main.ts]
autonomous: true
---

<objective>
Add keyboard hint display and click-to-insert suggestion functionality.

Purpose: Enhance UX with visual letter feedback (like Wordle's keyboard) and faster word entry via suggestion clicking.
Output: Working keyboard display component and clickable suggestion words.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/main.ts
@src/ui/GuessGrid.ts
@src/ui/Suggestions.ts
@src/style.css
@src/types/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add keyboard hint display component</name>
  <files>src/ui/Keyboard.ts, src/style.css, src/main.ts</files>
  <action>
Create a new Keyboard.ts UI component that displays a QWERTY keyboard layout showing letter states:

1. Create `src/ui/Keyboard.ts`:
   - Define KeyStatus type: 'unused' | 'absent' | 'present' | 'correct'
   - Track letter states in a Map<string, KeyStatus>
   - QWERTY layout: ['qwertyuiop', 'asdfghjkl', 'zxcvbnm']
   - render() creates keyboard HTML with rows and key buttons
   - updateFromFeedback(feedback: GuessFeedback) updates letter states:
     - gray -> absent (only if not already present/correct)
     - yellow -> present (only if not already correct)
     - green -> correct (always upgrades)
   - reset() clears all letter states to 'unused'
   - Style keys with appropriate colors matching Wordle palette

2. Add CSS in `src/style.css`:
   - .keyboard container below suggestions panel
   - .keyboard-row for each row (centered, gap between keys)
   - .key base style (40px width, 50px height for mobile touch targets)
   - .key-unused (default dark gray #818384)
   - .key-absent (darker gray #3a3a3c)
   - .key-present (yellow #b59f3b)
   - .key-correct (green #538d4e)
   - Responsive: slightly smaller keys on mobile

3. Integrate in `src/main.ts`:
   - Import and instantiate Keyboard after suggestions area
   - Add keyboard container div in HTML template
   - Call keyboard.updateFromFeedback() after each valid guess submission
   - Call keyboard.reset() in resetGame()

Avoid: Making the keyboard clickable for input (that's scope creep). This is display-only to show letter status hints.
  </action>
  <verify>
    - npm run build succeeds
    - Keyboard displays below suggestions
    - Keys change color when guesses are submitted with different letter statuses
    - Reset clears keyboard back to unused state
  </verify>
  <done>Keyboard displays and updates with correct letter status colors after each guess</done>
</task>

<task type="auto">
  <name>Task 2: Add click-to-insert suggestion functionality</name>
  <files>src/ui/Suggestions.ts, src/main.ts</files>
  <action>
Add ability to click a word from the suggestions list to auto-fill it in the current row:

1. Modify `src/ui/Suggestions.ts`:
   - Add onWordClick callback property: ((word: string) => void) | undefined
   - In render(), add click listener to suggestions-list (event delegation)
   - When a suggestion-item is clicked, extract word from .suggestion-word element
   - Call onWordClick callback with the lowercase word
   - Add cursor: pointer to .suggestion-item (already has it via :hover)
   - Add visual feedback: .suggestion-item:active with slightly darker background

2. Modify `src/main.ts`:
   - Add handleSuggestionClick(word: string) function:
     - If gameEnded, return early
     - If current row already has letters, clear them first (backspace loop or direct clear)
     - Input each letter of the word into the grid (call guessGrid methods)
     - Trigger onChange to update suggestions
   - Call suggestions.onWordClick(handleSuggestionClick) after Suggestions instantiation

3. Handle edge case in GuessGrid.ts if needed:
   - Add clearCurrentRow() method to clear current row letters without changing row
   - Or use existing methods to delete letters

Avoid: Auto-submitting the word after clicking. User should still press Enter to confirm colors and submit.
  </action>
  <verify>
    - npm run build succeeds
    - Clicking a suggestion word fills it into the current row
    - Letters appear with default gray color (user can still change colors)
    - Can click another word to replace current row content
    - Pressing Enter after click works normally
  </verify>
  <done>Clicking suggestion words auto-fills them into current row, ready for color assignment and submission</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds without errors
- [ ] npm run dev shows keyboard below suggestions
- [ ] Keys update colors correctly (green > yellow > gray priority)
- [ ] Clicking suggestions fills word into grid
- [ ] Reset game clears keyboard
- [ ] Both features work together (click word, assign colors, submit, keyboard updates)
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Keyboard displays letter hints after guesses
- Suggestion clicking fills words into grid
- Both features enhance UX without disrupting existing functionality
</success_criteria>

<output>
After completion, create `.planning/phases/10-ui-enhancements/10-01-SUMMARY.md`
</output>
