---
phase: 17-hints-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/ui/HintsPanel.ts, src/main.ts, src/style.css, src/types/index.ts, src/utils/settings.ts, src/ui/SettingsModal.ts]
autonomous: false
---

<objective>
Implement progressive hints system with 6 hints per word that players can reveal sequentially when stuck.

Purpose: Help players who are stuck by providing gradual clues without immediately spoiling the answer.
Output: HintsPanel component with eye icon reveal mechanism, integrated into the game UI.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@src/main.ts
@src/types/index.ts
@src/ui/SettingsModal.ts
@src/style.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add hints setting to AppSettings</name>
  <files>src/types/index.ts, src/utils/settings.ts</files>
  <action>
    1. In src/types/index.ts, add `showHints: boolean` to AppSettings interface
    2. In src/utils/settings.ts, add `showHints: true` to DEFAULT_SETTINGS

    The hints feature is enabled by default but users can disable it in settings.
  </action>
  <verify>TypeScript compiles without errors: `npm run build`</verify>
  <done>AppSettings interface has showHints boolean, defaults to true</done>
</task>

<task type="auto">
  <name>Task 2: Add hints toggle to SettingsModal</name>
  <files>src/ui/SettingsModal.ts</files>
  <action>
    1. Add a "Show Hints" toggle switch in the settings modal, similar to other toggles
    2. Place it after "Show Suggestions" setting
    3. Add description: "Display hints panel for progressive clues"
    4. Wire up the change handler to update currentSettings.showHints
    5. Update render() to set checkbox state from settings

    Follow the existing pattern for toggle switches (like hardMode, showSuggestions).
  </action>
  <verify>TypeScript compiles: `npm run build`</verify>
  <done>Settings modal has "Show Hints" toggle that persists and emits change events</done>
</task>

<task type="auto">
  <name>Task 3: Create HintsPanel component</name>
  <files>src/ui/HintsPanel.ts</files>
  <action>
    Create new HintsPanel class with:

    1. Constructor takes container element
    2. Private state: `answer: string`, `hintsRevealed: number` (0-6), `wordLength: number`

    3. generateHints(answer: string): string[] - Returns 6 hints based on word:
       - Hint 1: "First letter: {letter}"
       - Hint 2: "Last letter: {letter}"
       - Hint 3: "Contains {N} vowel(s)" (count A, E, I, O, U)
       - Hint 4: "Letter {position}: {letter}" (2nd position if word length >= 4)
       - Hint 5: "Letter {position}: {letter}" (middle position, calculated as floor(length/2)+1)
       - Hint 6: "The answer is: {WORD}" (uppercase, full reveal)

    4. render() method:
       - Create container div with class "hints-panel"
       - Header: "Hints" with hint icon (lightbulb SVG)
       - For each hint slot (1-6):
         - Show eye icon (visibility_off SVG when hidden, visibility SVG when revealed)
         - Revealed hints show text content
         - Hidden hints show "Hint {N}" with click-to-reveal eye icon
         - Clicking eye icon on NEXT unrevealed hint reveals it (sequential only)
       - Style: compact horizontal or vertical list depending on space

    5. setAnswer(answer: string) - Sets new answer and resets hintsRevealed to 0
    6. setWordLength(length: number) - Updates word length for dynamic hint positions
    7. reset() - Clears answer and resets hintsRevealed to 0
    8. revealNextHint() - Increments hintsRevealed (max 6)
    9. hide() / show() - Toggle visibility

    Export class from file.
  </action>
  <verify>TypeScript compiles: `npm run build`</verify>
  <done>HintsPanel.ts exists with generateHints(), render(), setAnswer(), reset(), revealNextHint() methods</done>
</task>

<task type="auto">
  <name>Task 4: Add HintsPanel styles</name>
  <files>src/style.css</files>
  <action>
    Add CSS for hints panel:

    ```css
    /* Hints Panel */
    .hints-panel {
      width: 100%;
      max-width: 350px;
      margin: 0.75rem auto;
      padding: 0.75rem;
      background: var(--bg-secondary);
      border-radius: 8px;
      border: 1px solid var(--border-color);
    }

    .hints-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .hints-header svg {
      width: 18px;
      height: 18px;
      fill: currentColor;
    }

    .hints-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .hint-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.4rem 0.5rem;
      background: var(--bg-tertiary);
      border-radius: 4px;
      font-size: 0.85rem;
    }

    .hint-item.revealed {
      background: var(--suggestion-top-bg);
    }

    .hint-item.final-reveal {
      background: var(--color-correct);
      color: white;
      font-weight: 600;
    }

    .hint-eye-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
      padding: 0;
      border: none;
      background: transparent;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s;
    }

    .hint-eye-btn:hover {
      opacity: 1;
    }

    .hint-eye-btn:disabled {
      cursor: not-allowed;
      opacity: 0.3;
    }

    .hint-eye-btn svg {
      width: 18px;
      height: 18px;
      fill: currentColor;
    }

    .hint-text {
      flex: 1;
    }

    .hint-text.hidden-hint {
      color: var(--text-secondary);
      font-style: italic;
    }

    .hints-panel.hidden {
      display: none;
    }
    ```

    Place this after the keyboard styles section.
  </action>
  <verify>CSS is valid, app builds: `npm run build`</verify>
  <done>Hints panel has consistent styling matching app theme (dark/light)</done>
</task>

<task type="auto">
  <name>Task 5: Integrate HintsPanel into main.ts</name>
  <files>src/main.ts</files>
  <action>
    1. Import HintsPanel from './ui/HintsPanel'

    2. Add hints area to HTML structure (after puzzle-info, before guess-grid):
       ```html
       <div class="hints-area"></div>
       ```

    3. Initialize HintsPanel:
       ```typescript
       const hintsArea = document.querySelector<HTMLElement>('.hints-area')!;
       const hintsPanel = new HintsPanel(hintsArea);
       ```

    4. In applySettings(), handle showHints setting:
       ```typescript
       if (settings.showHints) {
         hintsArea.classList.remove('hidden');
       } else {
         hintsArea.classList.add('hidden');
       }
       ```

    5. In initializeGame(), after setting the target answer:
       - For NYT mode: `hintsPanel.setAnswer(currentPuzzle.answer)`
       - For Open mode: `hintsPanel.setAnswer(openModeTarget)`
       - Set word length: `hintsPanel.setWordLength(currentWordLength)`

    6. In resetGame(), call `hintsPanel.reset()` then set new answer after initializeGame()

    7. In startPracticeMode(), call `hintsPanel.setAnswer(puzzle.answer)` and `hintsPanel.setWordLength(5)`

    Note: Don't reset hints on game win/loss - player may want to see remaining hints after game ends.
  </action>
  <verify>App builds and hints panel appears: `npm run dev`, check browser</verify>
  <done>HintsPanel integrated, shows/hides based on setting, updates with each new game</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Progressive hints system with 6 sequential hints revealed by clicking eye icons</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:5173
    3. Verify hints panel appears below puzzle info, above grid
    4. Verify all 6 hints show "Hint 1", "Hint 2", etc. with eye icons (visibility_off)
    5. Click eye icon on Hint 1 - should reveal first letter
    6. Click eye icon on Hint 2 - should reveal last letter
    7. Continue revealing hints 3-5 (vowel count, position hints)
    8. Click Hint 6 - should reveal full answer
    9. Verify can't click hints out of order (only next hint clickable)
    10. Test Reset Game - hints should reset to all hidden
    11. Go to Settings → toggle "Show Hints" off → hints panel should hide
    12. Test in both light and dark themes
    13. Test in Open Mode (different word length) - hints should work correctly
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Hints panel renders with 6 hint slots
- [ ] Sequential reveal works (must reveal in order)
- [ ] Eye icon toggles from hidden to revealed state
- [ ] Hint 6 reveals full answer
- [ ] Reset clears all hints
- [ ] Settings toggle shows/hides hints panel
- [ ] Works in NYT mode, Open mode, and Practice mode
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript or CSS errors
- Hints panel is visually consistent with app theme
- Sequential reveal enforced (can't skip hints)
- Works with variable word lengths (4-10 letters)
</success_criteria>

<output>
After completion, create `.planning/phases/17-hints-system/17-01-SUMMARY.md`
</output>
